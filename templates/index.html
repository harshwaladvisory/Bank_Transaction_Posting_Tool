{% extends "base.html" %}
{% block title %}Upload - Bank Transaction Posting Tool{% endblock %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h4><i class="bi bi-upload"></i> Upload Bank Statement</h4>
            </div>
            <div class="card-body">
                <form action="/upload" method="post" enctype="multipart/form-data" id="uploadForm">
                    <div class="drag-drop-zone" id="dropZone">
                        <i class="bi bi-cloud-upload" style="font-size: 3em; color: #6c757d;"></i>
                        <h5 class="mt-3">Drag & Drop your file here</h5>
                        <p class="text-muted">or click to browse</p>
                        <input type="file" name="file" id="fileInput" class="d-none" accept=".pdf,.xlsx,.xls,.csv">
                        <button type="button" class="btn btn-outline-primary" onclick="document.getElementById('fileInput').click()">
                            <i class="bi bi-folder2-open"></i> Browse Files
                        </button>
                    </div>
                    <div id="selectedFile" class="mt-3 d-none">
                        <div class="alert alert-info">
                            <i class="bi bi-file-earmark"></i> <span id="fileName"></span>
                            <button type="submit" class="btn btn-success btn-sm float-end">
                                <i class="bi bi-play-fill"></i> Process File
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-header">
                <h5><i class="bi bi-info-circle"></i> Supported Formats</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 text-center">
                        <i class="bi bi-file-pdf" style="font-size: 2em; color: #dc3545;"></i>
                        <p>PDF Statements</p>
                    </div>
                    <div class="col-md-4 text-center">
                        <i class="bi bi-file-excel" style="font-size: 2em; color: #28a745;"></i>
                        <p>Excel Files (.xlsx, .xls)</p>
                    </div>
                    <div class="col-md-4 text-center">
                        <i class="bi bi-file-text" style="font-size: 2em; color: #0d6efd;"></i>
                        <p>CSV Files</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
const dropZone = document.getElementById('dropZone');
const fileInput = document.getElementById('fileInput');
const selectedFile = document.getElementById('selectedFile');
const fileName = document.getElementById('fileName');

dropZone.addEventListener('dragover', (e) => {
    e.preventDefault();
    dropZone.classList.add('dragover');
});

dropZone.addEventListener('dragleave', () => {
    dropZone.classList.remove('dragover');
});

dropZone.addEventListener('drop', (e) => {
    e.preventDefault();
    dropZone.classList.remove('dragover');
    fileInput.files = e.dataTransfer.files;
    showSelectedFile();
});

dropZone.addEventListener('click', () => fileInput.click());
fileInput.addEventListener('change', showSelectedFile);

function showSelectedFile() {
    if (fileInput.files.length > 0) {
        fileName.textContent = fileInput.files[0].name;
        selectedFile.classList.remove('d-none');
    }
}
</script>
{% endblock %}